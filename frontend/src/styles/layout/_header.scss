// ===== Header 和 Navigation 样式 =====

// 主导航栏
.main-nav {
  background: rgba(0, 0, 0, 0.3);
  @include backdrop-blur(4px);
  border-bottom: 1px solid rgba(color('rpg-gold'), 0.3);
  position: sticky;
  top: 0;
  z-index: map-get($z-index, '50');
  flex-shrink: 0;
  width: 100%;
  overflow-x: hidden;
}

.nav-container {
  max-width: 1280px; // 7xl equivalent
  width: 100%;
  margin: 0 auto;
  padding: 0 spacing('2');
  box-sizing: border-box;
  
  @include respond-to('sm') {
    padding: 0 spacing('4');
  }
  
  @include respond-to('lg') {
    padding: 0 spacing('6');
  }
}

.nav-content {
  @include flex-center-vertical;
  justify-content: space-between;
  height: 4rem; // h-16 equivalent
  width: 100%;
  overflow-x: hidden;
}

// Logo 区域
.nav-logo {
  flex-shrink: 0;
  
  a {
    font-size: font-size('xl');
    font-family: $font-family-pixel;
    font-weight: map-get($font-weights, 'bold');
    color: color('rpg-gold');
    @include flex-center-vertical;
    
    img {
      width: 2.5rem; // w-10 equivalent
      height: 2.5rem; // h-10 equivalent
    }
  }
}

// 桌面端菜单
.desktop-menu {
  @include flex-center-vertical;
  flex-grow: 1;
  gap: spacing('2');
  overflow: hidden;
  
  @include respond-below('md') {
    display: none;
  }
}

// 主菜单链接区域
.main-menu {
  @include flex-center-vertical;
  gap: spacing('2');
  flex-shrink: 1;
  margin-left: spacing('4');
  overflow: hidden;
}

// 游戏状态栏
.game-status-bar {
  @include flex-center-vertical;
  gap: spacing('2');
  background: rgba(color('gray-900'), 0.7);
  border-radius: map-get($border-radius, 'lg');
  padding: spacing('1') spacing('3');
  margin: 0 spacing('4');
  box-shadow: shadow('base');
  flex-shrink: 0;
  white-space: nowrap;
  
  .status-item {
    @include flex-center-vertical;
    gap: spacing('1');
    flex-shrink: 0;
    
    img {
      width: 1.5rem; // 縮小圖標
      height: 1.5rem;
      flex-shrink: 0;
    }
    
    .status-value {
      font-weight: map-get($font-weights, 'bold');
      font-size: font-size('sm'); // 縮小字體
      white-space: nowrap;
      
      &.gold {
        color: #fde047; // text-yellow-300
      }
      
      &.prompt-power {
        color: #d8b4fe; // text-purple-300
      }
      
      &.energy {
        color: #fecaca; // text-red-200
      }
    }
    
    .energy-recovery {
      font-size: 10px; // 更小的恢復時間顯示
      color: color('gray-400');
      margin-left: spacing('1');
    }
  }
}

// 手机端菜单按钮
.mobile-menu-toggle {
  margin-right: -spacing('2');
  @include flex-center;
  
  @include respond-to('md') {
    display: none;
  }
}

// 手机版资源条
.mobile-status-bar-main {
  @include respond-to('md') {
    display: none;
  }
  
  background: rgba(color('gray-900'), 0.9);
  @include backdrop-blur(4px);
  border-bottom: 1px solid rgba(color('gray-700'), 0.5);
  padding: spacing('3') spacing('4');
  position: sticky;
  top: 4rem; // top-16 equivalent
  left: 0;
  width: 100%;
  z-index: map-get($z-index, '40');
  @include flex-center-vertical;
  justify-content: space-between;
  
  .mobile-status-item {
    @include flex-center-vertical;
    gap: spacing('1');
    
    img {
      width: 1.5rem; // w-6 equivalent
      height: 1.5rem; // h-6 equivalent
    }
    
    .mobile-status-value {
      font-weight: map-get($font-weights, 'bold');
      font-size: font-size('sm');
      
      &.gold {
        color: #fde047; // text-yellow-300
      }
      
      &.prompt-power {
        color: #d8b4fe; // text-purple-300
      }
      
      &.energy {
        color: #fecaca; // text-red-200
      }
    }
    
    .mobile-energy-recovery {
      font-size: font-size('xs');
      color: color('gray-400');
    }
  }
}

// 手机端菜单
.mobile-menu {
  @include respond-to('md') {
    display: none;
  }
  
  .mobile-menu-content {
    padding: spacing('2') spacing('4') spacing('3');
    background: rgba(color('gray-900'), 0.95);
    @include backdrop-blur(8px);
    border-top: 1px solid rgba(color('rpg-gold'), 0.2);
  }
  
  .mobile-nav-links {
    display: flex;
    flex-direction: column;
    gap: spacing('1');
  }
  
  .mobile-status-bar {
    margin-top: spacing('4');
    padding-top: spacing('4');
    border-top: 1px solid rgba(255, 255, 255, 0.1);
    
    .mobile-status-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: spacing('3');
      margin-bottom: spacing('4');
    }
    
    .mobile-status-item {
      @include flex-center-vertical;
      gap: spacing('2');
      padding: spacing('2');
      background: rgba(color('gray-800'), 0.5);
      border-radius: map-get($border-radius, 'md');
      
      img {
        width: 1.5rem;
        height: 1.5rem;
      }
      
      .mobile-status-label {
        font-size: font-size('xs');
        color: color('gray-400');
      }
      
      .mobile-status-value {
        font-weight: map-get($font-weights, 'bold');
        font-size: font-size('sm');
      }
    }
    
    .mobile-logout {
      width: 100%;
      padding: spacing('3');
      background: color('rpg-gold');
      color: color('black');
      font-weight: map-get($font-weights, 'bold');
      border-radius: map-get($border-radius, 'lg');
      text-align: center;
      transition: map-get($transitions, 'colors');
      
      &:hover {
        background: color('yellow-400');
      }
    }
  }
}

// 工具类
.hidden-mobile {
  @include respond-below('md') {
    display: none;
  }
}

.hidden-desktop {
  @include respond-to('md') {
    display: none;
  }
}

.flex-center-vertical {
  @include flex-center-vertical;
}

.flex-between {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.flex-grow {
  flex-grow: 1;
}

.w-full {
  width: 100%;
}

.gap-1 { gap: spacing('1'); }
.gap-2 { gap: spacing('2'); }
.gap-3 { gap: spacing('3'); }
.gap-4 { gap: spacing('4'); }

.relative {
  position: relative;
}

// SVG 图标样式
.h-6 {
  height: 1.5rem;
}

.w-6 {
  width: 1.5rem;
}

.block {
  display: block;
}

.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

// 響應式優化 - 更小螢幕
@media (max-width: 1200px) {
  .main-menu {
    gap: spacing('1');
    margin-left: spacing('2');
  }
  
  .game-status-bar {
    gap: spacing('1');
    padding: spacing('1') spacing('2');
    margin: 0 spacing('2');
    
    .status-item {
      gap: 0.25rem;
      
      img {
        width: 1.25rem;
        height: 1.25rem;
      }
      
      .status-value {
        font-size: 11px;
      }
      
      .energy-recovery {
        font-size: 9px;
      }
    }
  }
  
  .logout-btn {
    padding: spacing('2') spacing('2');
    font-size: font-size('sm');
  }
}

@media (max-width: 1024px) {
  .game-status-bar {
    .status-item {
      img {
        width: 1rem;
        height: 1rem;
      }
      
      .status-value {
        font-size: 10px;
      }
    }
  }
}
